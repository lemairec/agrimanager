{% extends 'base_agri.html.twig' %}

{% block body %}
<div class="toto">
    <div class="card">
        <canvas id="myChart"></canvas>
    </div>
</div>


<div class="toto">
    <div class="card">
        <table class="table">
            <tr>
                <th>Culture</th>
                <th>Ann√©e</th>
                <th>Rendement</th>
            </tr>
            {% for key, value in cultures %}
                <tr>
                    <th>{{key}}</th>
                    <th></th>
                    <th>{{value["rendement_moy"] | showUnity('t/ha')}}</th>
                </tr>
                {% for key2, value2 in value["years"] %}
                    <tr>
                        <td></td>
                        <td>{{key2}}</td>
                        <td>{{value2['rendement'] | showUnity('t/ha')}}</td>
                    </tr>

            {% endfor %}
            {% endfor %}
        </table>
    </div>
</div>

<div class="toto">
    <div class="card">
        <table class="table">
            <tr>
                <th>Parcelle</th>
                <th></th>
                <th>Surface</th>
                <th>Rendement</th>
            </tr>

            {% for rendement in rendements %}
                <tr>
                    <td>{{rendement['name']}}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                {% for parcelle in rendement['parcelles'] %}
                    <tr  bgcolor='{{ parcelle['color']}}'>
                        <td>{{parcelle['name']}}</td>
                        <td>{{parcelle['espece']}}</td>
                        <td>{{parcelle['caracteristiques']}}</td>
                        <td>{{parcelle['surface'] | showHa}}</td>
                        <td>{{parcelle['rendement'] | showUnity('t/ha')}}</td>
                    </tr>
            {% endfor %}
            {% endfor %}
        </table>
    </div>
</div>

<script src='/lib/Chart.js/Chart.min.js'></script>
<script>
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {

        labels: [
            {% for chartjs_label in chartjs_labels %}
                "{{chartjs_label}}",
            {% endfor %}
            ],
        datasets: [
            {% for chartjs_campagne in chartjs_campagnes %}
                {

                    label: '{{chartjs_campagne['name']}}',
                    backgroundColor: '{{chartjs_campagne['color']}}',
                    borderColor: 'rgba(100, 100, 100, 1)',
                    borderWidth: 1,
                    data: [
                        {% for data in chartjs_campagne['data'] %}
                            "{{data | showDecimal}}",
                        {% endfor %}
                    ]
                },
            {% endfor %}
            ]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:false
                }
            }]
        }
    }
});
</script>
{% endblock %}
