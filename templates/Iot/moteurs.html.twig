{% extends 'base_agri.html.twig' %}

{% block body %}


    <div class="card">
        <div class="card-header">
            Moteurs
        </div>
        <div class="list-group">
            {% for moteur in balises_names %}
            <div class="list-group-item flex-column align-items-start">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">
                        {%if moteur.is_ok %}
                            {%if moteur.my_last_value %}
                                <button type="button" class="btn btn-success"></button>
                            {% else %}
                                <button type="button" class="btn btn-secondary"></button>
                            {% endif %}
                        {% else %}
                            <button type="button" class="btn btn-danger"></button>
                        {% endif %}
                        <a href="{{ url("silo_moteur", {'id': moteur.id}) }}">{{moteur.label}}
                        </a>
                    </h5>
                </div>

                <div class="row" style="min-height: 1.5rem;">
                    <div class="col-md-4">
                        {{moteur.name}}
                    </div>
                    <div class="col-md-2">
                        {{moteur.last_update | showDatetime }}
                    </div>
                    <div class="col-md-2">
                        {{moteur.my_last_value }}
                    </div>
                    <div class="col-md-2">
                        T° ext {{moteur.last_temperature | showUnity("°C") }}
                    </div>
                    <div class="col-md-2">
                        diff {{moteur.ecart_temperature | showUnity("°C") }}
                    </div>
                </div>

                {%if moteur.balise %}
                <div class="row" style="min-height: 1.5rem;">
                    <div class="col-md-4">
                        {%if moteur.balise.is_balise_ok %}
                            <button type="button" class="btn btn-success"></button>
                        {% else %}
                            <button type="button" class="btn btn-danger"></button>
                        {% endif %}
                        {{moteur.balise.label}}
                    </div>
                    <div class="col-md-2">
                        {{moteur.balise.last_update | showDatetime }}
                    </div>
                    <div class="col-md-2">
                        {{ moteur.balise.diff | showUnity("°C") }}
                    </div>
                    <div class="col-md-2">
                         {{moteur.balise.last_calculate | showUnity(moteur.balise.unity) }}
                    </div>
                    <div class="col-md-2">
                        (diff {{(moteur.balise.last_temp - moteur.last_temperature) | showUnity("°C") }})
                    </div>
                    
                </div>
                {% endif %}

            </div>
            {% endfor %}
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            Moteurs (autres)
        </div>
        <div class="list-group">
            {% for moteur in balises_others %}
            <div class="list-group-item flex-column align-items-start">

                <div class="row" style="min-height: 1.5rem;">
                    <div class="col-md-4">
                        {%if moteur.is_ok %}
                            <button type="button" class="btn btn-success"></button>
                        {% else %}
                            <button type="button" class="btn btn-danger"></button>
                        {% endif %}
                        <a href="{{ url("silo_moteur", {'id': moteur.id}) }}">{{moteur.name}}
                        </a>
                    </div>
                    <div class="col-md-2">
                        {{moteur.last_update | showDatetime }}
                    </div>
                    <div class="col-md-2">
                         {{moteur.my_last_value }}
                    </div>
                    <div class="col-md-2">
                         {{moteur.last_temperature | showUnity("°C") }}
                    </div>
                </div>

            </div>
            {% endfor %}
        </div>
    </div>

{% endblock %}
