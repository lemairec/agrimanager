{% macro show_eur(value) %}
    {%- spaceless %}
    {{ value | number_format(2, ',', ' ') }} €
    {% endspaceless -%}
{% endmacro %}

{% macro show_eur_unity(value, unity) %}
    {%- spaceless %}
    {{ value | number_format(2, ',', ' ') }} €/{{ unity }}
    {% endspaceless -%}
{% endmacro %}

{% macro show_ha(value) %}
    {%- spaceless %}
    {{ value | number_format(2, ',', ' ') }}
    {% if app.user.show_unity %}
     ha
    {% endif %}
    {% endspaceless -%}
{% endmacro %}

{% macro show_unity(value, unity) %}
    {%- spaceless %}
    {{ value | number_format(2, ',', ' ') }}
    {% if app.user.show_unity %}
      {{ unity }}
    {% endif %}
    {% endspaceless -%}
{% endmacro %}

{% macro show_unity_ha(value, unity) %}
    {%- spaceless %}
    {{ value | number_format(2, ',', ' ') }}
    {% if app.user.show_unity %}
     {{ unity }}/ha
    {% endif %}
    {% endspaceless -%}
{% endmacro %}

{% macro show_eur_ha(value) %}
    {%- spaceless %}
    {{ value | number_format(2, ',', ' ') }}
    {% if app.user.show_unity %}
     €/ha
    {% endif %}
    {% endspaceless -%}
{% endmacro %}

{% macro show_percent(value) %}
    {%- spaceless %}
    {{ (value*100) |round(2, 'common')| number_format(2, ',', ' ') }}
    {% if app.user.show_unity %}
     %
    {% endif %}
    {% endspaceless -%}
{% endmacro %}


<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{% block title %}Welcome!{% endblock %}</title>
        {% block stylesheets %}{% endblock %}
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
        <link href="/css/bootstrap.min.css" rel="stylesheet">
        <link href="/css/bootstrap-datepicker.min.css" rel="stylesheet">
        <link href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css" rel="stylesheet">
        <script src="/js/jquery.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/bootstrap-datepicker.min.js"></script>
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        <nav class="navbar navbar-inverse navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="/" class="navbar-brand">MaPlaine</a>
                </div>
                <div id="navbar" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/ilots">Ilots</a></li>
                        <li><a href="/campagnes">Campagnes</a></li>
                        <li><a href="/parcelles">Parcelles</a></li>
                        <li><a href="/interventions">Interventions</a></li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Produits <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="/produits">Produits</a></li>
                                <li><a href="/achats">Achats</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="/stocks">Stocks</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="/ephy_produits">Produits Ephy</a></li>

                            </ul>
                        </li>
                        <li><a href="/calendar">Calendrier</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Bilan <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="/bilan">Bilan</a></li>
                                <li><a href="/bilan_detail">Bilan Detaillé</a></li>
                            </ul>
                        </li>
                        <li><a href="/materiels">Materiel</a></li>
                        {% if app.user.username == "lejard" %}
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Gestion <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="/cours">Cours</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="/comptes">Comptes</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="/operations">Operations</a></li>
                                <li><a href="/facture_fournisseurs">Factures</a></li>
                            </ul>
                        </li>
                        {% endif %}
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <!--button(type='button', class='btn btn-default navbar-btn') Sign in-->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Profile<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="/logout">Deconnexion</a></li>
                                <li><a href="/profil">{{ app.user.username }}</a></li>
                            </ul>
                        </li>
                    </ul>

                </div>
            </div>
        </nav>

        <div class="container bs-docs-container">
            {% if campagnes is defined %}
            <select class="selectpicker" id="dynamic_select">>
                {%for campagne in campagnes %}
                <option value="{{campagne.id}}" {%if campagne.id == campagne_id %} selected {%endif%}>{{campagne.name}}</option>
                {%endfor%}
            </select>
            {% endif %}
        </div>
        {% block body %}{% endblock %}
    </body>
    <script>
$(function(){
    // bind change event to select
    $('#dynamic_select').on('change', function () {
        var val = $(this).val(); // get selected value
        if (val) { // require a URL
            var url = window.location.href;
            if(location.search){
                url = url.replace(location.search,"?campagne_id="+val);
            } else {
                url = url + "?campagne_id="+val;
            }
            console.log(url);

            window.location = url; // redirect
        }
        return false;
    });
});
    </script>
    <script>
$(document).ready(function() {
    $('.js-datepicker').datepicker({
        format: 'dd/mm/yyyy'
    });
});
    </script>

</html>
